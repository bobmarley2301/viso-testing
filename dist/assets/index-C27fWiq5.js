import{b as e,d as s,e as r,u as t,j as a,B as i,L as n,I as l,V as c,H as o,f as d,g as p,r as h,h as u,C as g,i as m,k as x,G as j,S as f,l as y,T as b,m as v,n as R,D as w,F as M,O as I,Q as C,o as $,p as S,q as A,s as P,t as q,v as W}from"./vendor-CtDKSVPe.js";import{C as k,b as B}from"./ui-Tshd1TtY.js";var z;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var D=e;z=D.createRoot,D.hydrateRoot;const F="https://www.themealdb.com/api/json/v1/1",O={searchRecipes:async e=>(await s.get(`${F}/search.php?s=${e}`)).data,getRecipeById:async e=>(await s.get(`${F}/lookup.php?i=${e}`)).data,getRecipesByCategory:async e=>(await s.get(`${F}/filter.php?c=${e}`)).data,getAllCategories:async()=>(await s.get(`${F}/categories.php`)).data,getRandomMeal:async()=>(await s.get(`${F}/random.php`)).data,getRecipesByArea:async e=>(await s.get(`${F}/filter.php?a=${e}`)).data,getRecipesByIngredient:async e=>(await s.get(`${F}/filter.php?i=${e}`)).data,getAllAreas:async()=>(await s.get(`${F}/list.php?a=list`)).data,getAllIngredients:async()=>(await s.get(`${F}/list.php?i=list`)).data,getSmallImageUrl:e=>e.replace("/images/media/meals/","/images/media/meals/preview/")},T=r()(((e,s)=>({selectedRecipes:[],addRecipe:s=>e((e=>({selectedRecipes:[...e.selectedRecipes,s]}))),removeRecipe:s=>e((e=>({selectedRecipes:e.selectedRecipes.filter((e=>e.idMeal!==s.idMeal))}))),getIngredients:()=>{const{selectedRecipes:e}=s(),r=new Map;return e.forEach((e=>{Object.entries(e).filter((([e,s])=>e.startsWith("strIngredient")&&s)).forEach((([s,t])=>{const a=`strMeasure${s.slice(13)}`,i=e[a];r.set(t,i)}))})),Array.from(r.entries()).map((([e,s])=>({name:e,measure:s})))}}))),E=({recipe:e,onSelect:s})=>{const{addRecipe:r,selectedRecipes:h}=T(),u=t(),g=h.some((s=>s.idMeal===e.idMeal));return a.jsxs(i,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",transition:"all 0.2s",_hover:{transform:"translateY(-4px)",shadow:"lg"},children:[a.jsx(n,{to:"/recipe/$recipeId",params:{recipeId:e.idMeal},children:a.jsx(l,{src:e.strMealThumb,alt:e.strMeal,height:"200px",width:"100%",objectFit:"cover",cursor:"pointer"})}),a.jsxs(c,{p:4,align:"start",spacing:2,children:[a.jsx(n,{to:"/recipe/$recipeId",params:{recipeId:e.idMeal},style:{fontSize:"1.25rem",fontWeight:"bold",cursor:"pointer",textDecoration:"none"},children:e.strMeal}),a.jsxs(o,{spacing:2,children:[a.jsx(d,{colorScheme:"blue",children:e.strCategory}),a.jsx(d,{colorScheme:"green",children:e.strArea})]}),a.jsx(p,{colorScheme:g?"red":"blue",onClick:()=>{s?s(e):(r(e),u({title:"Рецепт додано",description:`${e.strMeal} додано до вибраних рецептів`,status:"success",duration:3e3,isClosable:!0}))},width:"100%",children:g?"Вибрано":"Вибрати"})]})]})};const K=({currentPage:e,totalPages:s,onPageChange:r})=>a.jsxs(o,{spacing:2,justify:"center",mt:4,children:[a.jsx(p,{onClick:()=>r(e-1),isDisabled:1===e,leftIcon:a.jsx(k,{}),children:"Попередня"}),(()=>{const r=[];if(s<=7)for(let e=1;e<=s;e++)r.push(e);else if(e<=4){for(let e=1;e<=7;e++)r.push(e);r.push("...",s)}else if(e>=s-3){r.push(1,"...");for(let e=s-6;e<=s;e++)r.push(e)}else{r.push(1,"...");for(let s=e-2;s<=e+2;s++)r.push(s);r.push("...",s)}return r})().map(((s,t)=>a.jsx(i,{children:"..."===s?a.jsx(i,{px:2,children:"..."}):a.jsx(p,{onClick:()=>r(s),variant:e===s?"solid":"outline",colorScheme:e===s?"blue":"gray",children:s})},t))),a.jsx(p,{onClick:()=>r(e+1),isDisabled:e===s,rightIcon:a.jsx(B,{}),children:"Наступна"})]}),L=new C,N=$({component:()=>a.jsxs(i,{minH:"100vh",children:[a.jsxs(M,{as:"nav",align:"center",justify:"space-between",wrap:"wrap",padding:"1rem",bg:"blue.500",color:"white",children:[a.jsx(M,{align:"center",mr:5,children:a.jsx(n,{to:"/",style:{fontSize:"1.5rem",fontWeight:"bold",color:"white",textDecoration:"none"},children:"Рецепти"})}),a.jsxs(M,{children:[a.jsx(n,{to:"/",style:{marginRight:"1rem",color:"white",textDecoration:"none"},children:"Всі рецепти"}),a.jsx(n,{to:"/selected",style:{color:"white",textDecoration:"none"},children:"Вибрані рецепти"})]})]}),a.jsx(I,{})]})}),H=S({getParentRoute:()=>N,path:"/",component:()=>{var e,s;const[r,t]=h.useState(""),[n,l]=h.useState(""),[o,d]=h.useState(""),[p,y]=h.useState(1),b=function(e,s){const[r,t]=h.useState(e);return h.useEffect((()=>{const r=setTimeout((()=>{t(e)}),s);return()=>{clearTimeout(r)}}),[e,s]),r}(r,500),{data:v}=u({queryKey:["areas"],queryFn:O.getAllAreas}),{data:R}=u({queryKey:["ingredients"],queryFn:O.getAllIngredients}),{data:w}=u({queryKey:["recipes",b,n,o],queryFn:async()=>{if(b)return O.searchRecipes(b);if(n)return O.getRecipesByArea(n);if(o)return O.getRecipesByIngredient(o);return{meals:(await Promise.all(Array(14).fill(null).map((()=>O.getRandomMeal())))).flatMap((e=>e.meals||[]))}}}),M=h.useMemo((()=>(null==w?void 0:w.meals)||[]),[w]),I=Math.ceil(M.length/12),C=h.useMemo((()=>M.slice(12*(p-1),12*p)),[M,p]);return a.jsx(g,{maxW:"container.xl",py:8,children:a.jsxs(c,{spacing:8,children:[a.jsx(m,{children:"Рецепти"}),a.jsx(i,{width:"100%",children:a.jsx(x,{placeholder:"Пошук рецептів...",value:r,onChange:e=>{t(e.target.value),l(""),d(""),y(1)},size:"lg"})}),a.jsxs(j,{templateColumns:"repeat(2, 1fr)",gap:4,width:"100%",children:[a.jsx(f,{placeholder:"Виберіть кухню",value:n,onChange:e=>{l(e.target.value),t(""),d(""),y(1)},children:null==(e=null==v?void 0:v.meals)?void 0:e.map((e=>a.jsx("option",{value:e.strArea,children:e.strArea},e.strArea)))}),a.jsx(f,{placeholder:"Виберіть інгредієнт",value:o,onChange:e=>{d(e.target.value),t(""),l(""),y(1)},children:null==(s=null==R?void 0:R.meals)?void 0:s.map((e=>a.jsx("option",{value:e.strIngredient,children:e.strIngredient},e.strIngredient)))})]}),a.jsx(j,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},gap:6,width:"100%",children:C.map((e=>a.jsx(E,{recipe:e},e.idMeal)))}),I>1&&a.jsx(K,{currentPage:p,totalPages:I,onPageChange:y})]})})}}),_=S({getParentRoute:()=>N,path:"/recipe/$recipeId",component:()=>{var e;const{recipeId:s}=y({from:"/recipe/$recipeId"}),{addRecipe:r,removeRecipe:n,selectedRecipes:o}=T(),d=t(),{data:p}=u({queryKey:["recipe",s],queryFn:()=>O.getRecipeById(s)}),h=null==(e=null==p?void 0:p.meals)?void 0:e[0],x=o.some((e=>e.idMeal===(null==h?void 0:h.idMeal)));if(!h)return a.jsx(g,{maxW:"container.xl",py:8,children:a.jsx(m,{children:"Рецепт не знайдено"})});const f=Object.entries(h).filter((([e,s])=>e.startsWith("strIngredient")&&s)).map((([e,s])=>{const r=`strMeasure${e.slice(13)}`;return{ingredient:s,measure:h[r]}}));return a.jsx(g,{maxW:"container.xl",py:8,children:a.jsxs(c,{spacing:8,align:"stretch",children:[a.jsxs(j,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:8,children:[a.jsx(i,{children:a.jsx(l,{src:h.strMealThumb,alt:h.strMeal,borderRadius:"lg",width:"100%",objectFit:"cover"})}),a.jsxs(c,{align:"start",spacing:4,children:[a.jsx(m,{children:h.strMeal}),a.jsxs(b,{color:"gray.600",children:["Категорія: ",h.strCategory]}),a.jsxs(b,{color:"gray.600",children:["Кухня: ",h.strArea]}),a.jsxs(b,{color:"gray.600",children:["Інструкції: ",h.strInstructions]}),a.jsx(i,{as:"button",onClick:()=>{x?(n(h),d({title:"Рецепт видалено",description:`${h.strMeal} видалено з вибраних рецептів`,status:"info",duration:3e3,isClosable:!0})):(r(h),d({title:"Рецепт додано",description:`${h.strMeal} додано до вибраних рецептів`,status:"success",duration:3e3,isClosable:!0}))},px:4,py:2,bg:x?"red.500":"blue.500",color:"white",borderRadius:"md",_hover:{bg:x?"red.600":"blue.600"},children:x?"Видалити з вибраних":"Додати до вибраних"})]})]}),a.jsxs(i,{children:[a.jsx(m,{size:"md",mb:4,children:"Інгредієнти"}),a.jsx(v,{spacing:2,children:f.map(((e,s)=>a.jsxs(R,{children:[e.measure," ",e.ingredient]},s)))})]})]})})}}),G=S({getParentRoute:()=>N,path:"/selected",component:()=>{const{selectedRecipes:e,removeRecipe:s,getIngredients:r}=T(),n=t(),l=e=>{s(e),n({title:"Рецепт видалено",description:`${e.strMeal} видалено з вибраних рецептів`,status:"info",duration:3e3,isClosable:!0})};return 0===e.length?a.jsx(g,{maxW:"container.xl",py:8,children:a.jsxs(c,{spacing:4,children:[a.jsx(m,{children:"Мої вибрані рецепти"}),a.jsx(b,{children:"У вас поки немає вибраних рецептів"})]})}):a.jsx(g,{maxW:"container.xl",py:8,children:a.jsxs(c,{spacing:8,align:"stretch",children:[a.jsx(m,{children:"Мої вибрані рецепти"}),a.jsx(j,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:e.map((e=>a.jsx(E,{recipe:e,onSelect:l},e.idMeal)))}),a.jsx(w,{}),a.jsxs(i,{children:[a.jsx(m,{size:"md",mb:4,children:"Список інгредієнтів:"}),a.jsx(v,{spacing:2,children:r().map(((e,s)=>a.jsxs(R,{children:["• ",e.name," - ",e.measure]},s)))})]}),a.jsx(w,{}),a.jsxs(i,{children:[a.jsx(m,{size:"md",mb:4,children:"Інструкції по приготуванню:"}),e.map(((e,s)=>a.jsxs(i,{mb:6,children:[a.jsx(m,{size:"sm",mb:2,children:e.strMeal}),a.jsx(b,{whiteSpace:"pre-line",children:e.strInstructions})]},e.idMeal)))]})]})})}}),Q=A({routeTree:N.addChildren([H,_,G])});function U(){return a.jsx(P,{client:L,children:a.jsx(q,{children:a.jsx(W,{router:Q})})})}z(document.getElementById("root")).render(a.jsx(h.StrictMode,{children:a.jsx(U,{})}));
//# sourceMappingURL=index-C27fWiq5.js.map
